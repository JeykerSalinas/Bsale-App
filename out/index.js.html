<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>let cardsArray = [];
let myCategories = [];
const cardsTitle = document.getElementById("cards-title");
const cardsLayout = () => {
  const cardsNode = document.getElementById("myData");
  console.log(cardsArray);
  cardsNode.innerHTML = "";
  cardsArray.map((product) => {
    cardsNode.innerHTML += `&lt;div class="my-card card col-12 col-md-6 col-lg-4 m-4  rounded" style="width: 18rem;">
    &lt;div class="h-100 d-flex align-items-center border-bottom">
    &lt;img src="${
      product.url_image
        ? product.url_image
        : "https://www.bevi.com/static/files/0/ecommerce-default-product.png"
    }" class="card-img-top img-fluid  " alt="${product.name}">
    
    &lt;/div>
          &lt;div class="card-body">
            &lt;ul class="list-group list-group-flush">
          &lt;li class="list-group-item ">
          ${product.name}&lt;/li>
          &lt;li class="list-group-item price text-end">$${product.price.toLocaleString(
            "de-DE"
          )}&lt;/li>
        &lt;/ul>
          &lt;/div>
        &lt;/div>`;
  });
};
/**
 * Represents a book.
 * @constructor
 * @param {string} title - The title of the book.
 * @param {string} author - The author of the book.
 */
const getData = async (URL) => {
  try {
    const request = await fetch(URL);
    const data = await request.json();
    cardsArray = data;
    cardsLayout();
  } catch (error) {
    document.getElementById("myData").innerHTML =
      "&lt;p>Lo sentimos, no se encontraron resultados...&lt;/p>";
    console.error(error);
  }
};

const initialData = () => {
  cardsTitle.innerHTML = "Todos nuestros productos:";
  const PRODUCTS_URL = "https://api-bsale-jeyker.herokuapp.com/bsale/products";
  getData(PRODUCTS_URL);
};
initialData();

const getCategory = (async () => {
  const CATEGORY_URL = "https://api-bsale-jeyker.herokuapp.com/bsale/category";
  try {
    const request = await fetch(CATEGORY_URL);
    const data = await request.json();
    myCategories = data;
    data.map(
      (a) =>
        (document.getElementById(
          "categories"
        ).innerHTML += `&lt;li class="dropdown-item" onclick="filterCardsByCategory(${a.id})" >${a.name}&lt;/li>`)
    );
  } catch (error) {
    console.error(error);
  }
})();

const filterByName = (search) => {
  cardsTitle.innerHTML = `Resultados para: &lt;span style="text-transform: capitalize">${search}&lt;/span>`;
  const PRODUCTS_BY_NAME = `https://api-bsale-jeyker.herokuapp.com/bsale/products/name/${search}`;
  getData(PRODUCTS_BY_NAME);
};

const submitButton = document.getElementById("submitButton");
const myForm = document.getElementById("myForm");
const search = document.getElementById("mySearch");

search.addEventListener("keyup", (e) => {
  e.target.value === "" ? initialData() : filterByName(e.target.value);
});

const filterByCategory = (search) => {
  cardsTitle.innerHTML = `Categoría: &lt;span style="text-transform: capitalize">${
    myCategories.find((a) => a.id === search).name
  }&lt;/span>`;
  const PRODUCTS_BY_CATEGORY = `https://api-bsale-jeyker.herokuapp.com/bsale/products/category/${search}`;
  getData(PRODUCTS_BY_CATEGORY);
};

const filterCardsByCategory = (id) => {
  id === 0 ? initialData() : filterByCategory(id);
};

const sortCardsByName = () => {
  cardsArray.sort((a, b) => (a.name &lt; b.name ? -1 : a.name > b.name ? 1 : 0));
  cardsLayout();
};
sortCardsLowerPrice = () => {
  cardsArray.sort((a, b) => a.price - b.price);
  cardsLayout();
};
sortCardsHigherPrice = () => {
  cardsArray.sort((a, b) => b.price - a.price);
  cardsLayout();
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="getData.html">getData</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Fri Apr 08 2022 11:18:43 GMT-0400 (hora estándar de Chile)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
